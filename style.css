:root{
    --bg:#0f1220;
    --card:#161a2b;
    --text:#e6e8f0;
    --muted:#9aa3b2;
    --ring:#6ea8ff;
    --border:#2a3046;
    --good:#35c28d;
}

/* ========= Base + background ========= */
*{box-sizing:border-box}
html,body{height:100%;margin:0;overflow-x:hidden;color:var(--text);
    background:var(--bg);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

button,input,select{font:inherit;color:inherit}

/* Glow + soft grain */
body::before{
    content:"";position:fixed;inset:-40% -20% -20% -20%;z-index:-1;pointer-events:none;
    background:
    radial-gradient(1200px 800px at 18% -8%,#1a2040 0%,rgba(26,32,64,.6) 32%,transparent 60%),
    radial-gradient(900px 700px at 90% 0%,rgba(30,36,70,.35),transparent 60%),
linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0))}
body::after{
    content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency=".8" numOctaves="2" stitchTiles="stitch"/></filter><rect width="120" height="120" filter="url(%23n)" opacity=".035"/></svg>');
background-size:220px 220px;mix-blend-mode:overlay;opacity:.6}

/* ========= Layout ========= */
/* ===== Layout ===== */
.app{
  display:grid;
  grid-template-columns: 320px minmax(0,1fr); /* sidebar | main */
  gap:20px;
  min-height:100vh;
}

/* Canvas is just spacing; the inner grid handles the split */
.canvas{ padding:1.25rem; }

/* Equal halves for nodes and JSON, no caps */
.canvas-inner{
  display:grid;
  align-items:start;
  gap:16px;
  grid-template-columns: minmax(0,1fr) minmax(0,1fr); /* 50/50 split */
  width:100%;
  margin:0;
}

/* Make sure both columns can actually fill their tracks */
.nodes, .codepane { width:100%; }

/* Keep your existing sticky sidebar */
.sidebar{
  padding:2rem 1rem 2rem 1.5rem;
  position:sticky; top:12px; align-self:start;
  max-width:320px; height:fit-content; width:100%;
}

/* Responsive: stack nodes and JSON under each other */
@media (max-width:1350px){
  .canvas-inner{ grid-template-columns: 1fr; }
  .codepane{ position:static; }
}

/* Mobile: sidebar stacks */
@media (max-width:980px){
  .app{ grid-template-columns: 1fr; }
  .sidebar{ position:static; max-width:100%; }
  .canvas{ padding:1rem; }
}

/* ========= Card ========= */
.card{
    background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;
box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02)}
.card h2{margin:0 0 6px;font-size:1.25rem;letter-spacing:.2px}
.card .hint{margin:0 0 16px;color:var(--muted);font-size:.95rem}

/* ========= Form ========= */
.form{display:grid;gap:14px}
.form-group{display:grid;gap:6px}
label{font-size:.85rem;color:var(--muted)}
.input,.select{
    width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);
background:#0f1324;color:var(--text);outline:none;transition:border-color 120ms ease,box-shadow 120ms ease}
.input::placeholder{color:#788198}
.input:focus{border-color:var(--ring);box-shadow:0 0 0 3px rgba(110,168,255,.2)}
.select{-webkit-appearance:none;-moz-appearance:none;appearance:none;
    background-image:
    linear-gradient(45deg,transparent 50%,#9aa3b2 50%),
    linear-gradient(135deg,#9aa3b2 50%,transparent 50%),
    linear-gradient(#0f1324,#0f1324);
    background-position:calc(100% - 18px) calc(50% - 2px), calc(100% - 12px) calc(50% - 2px), 100% 0;
background-size:6px 6px,6px 6px,2.4rem 100%;background-repeat:no-repeat;padding-right:2.6rem}
.select:focus{border-color:var(--ring);box-shadow:0 0 0 3px rgba(110,168,255,.2)}
.btn{
    display:inline-block;border:1px solid var(--border);background:#0f1324;color:var(--text);
padding:10px 12px;border-radius:12px;cursor:pointer;transition:box-shadow 120ms ease,transform 60ms ease}
.btn:hover{box-shadow:0 0 0 3px rgba(110,168,255,.2)}
.btn:active{transform:translateY(1px)}
.btn-sm{padding:6px 10px;border-radius:10px;font-size:.9rem}
.btn-ghost{background:transparent;border:1px dashed var(--border)}
.form-actions{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.props{display:grid;gap:12px}

/* ========= Nodes / Groups ========= */
.nodes{
width:100%;max-width:100%;gap:10px;position:relative;padding-right:18px;padding-bottom:64px}
.nodes::after{
    content:"";position:sticky;left:0;right:0;bottom:-1px;display:block;height:64px;pointer-events:none;
background:linear-gradient(to bottom, rgba(15,18,32,0), rgba(15,18,32,1))}
.node{
    background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px 16px;
display:flex;align-items:center;justify-content:space-between;box-shadow:0 8px 20px rgba(0,0,0,.25)}
.node-title{font-weight:600}
.node-meta{color:var(--muted);font-size:.9rem}
.node-pill{font-size:.8rem;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:#0f1324;margin-left:8px}
.node-ok{border-color:rgba(53,194,141,.3);box-shadow:0 0 0 3px rgba(53,194,141,.15)}

.group{
    border:1px solid rgba(53,194,141,.28);
    background:linear-gradient(180deg, rgba(53,194,141,.08), rgba(53,194,141,.05));
border-radius:18px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.25)}
.group + .group{margin-top:14px}
.group-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.group-title{font-weight:600}
.group-count{color:var(--muted);font-size:.9rem}
.group-actions{display:flex;gap:8px}
.group-body{display:grid;gap:12px}
.group.active{box-shadow:0 0 0 3px rgba(53,194,141,.18), 0 6px 16px rgba(0,0,0,.25)}

/* ========= Code pane ========= */
.codepane{position:sticky;top:12px;align-self:start;height:fit-content}
.codecard{padding:0}
.codecard .codecard-header{
padding:14px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:8px}
.codecard .codecard-header h3{margin:0;font-size:1rem}
.codecard-actions{display:flex;align-items:center;gap:8px}
.toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer}
.toggle input{accent-color:var(--ring)}
.code{
    width:100%;min-height:360px;max-width:100%;resize:vertical;overflow:auto;box-sizing:border-box;
    background:#0b0f1f;color:#e6e8f0;border:none;border-radius:0 0 16px 16px;padding:14px 16px;
    line-height:1.5;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
font-size:.92rem;box-shadow:inset 0 0 0 1px var(--border)}

/* ========= JSON editor (gutter red dot + mirror) ========= */
.json-editor{position:relative;width:100%}
#filtersOutput.code{
    position:relative;background:transparent;color:var(--text);
    font-family:monospace;font-size:.9rem;line-height:1.5;width:100%;
padding:10px 12px;border-radius:12px;border:1px solid var(--border);resize:vertical}
.json-gutter .dot{
position:absolute;width:8px;height:8px;border-radius:50%;background:#ff3b30;box-shadow:0 0 0 2px rgba(0,0,0,.25);pointer-events:none}
.json-gutter { position: absolute; inset: 0; pointer-events: none; z-index: 2; }
.json-measure { position: absolute; visibility: hidden; white-space: pre-wrap; word-wrap: break-word; overflow-wrap: break-word; box-sizing: border-box; z-index: -1; }

/* Inline error message under the editor */
.json-error{color:#ff9aa2;font-size:.9rem;margin-top:6px;white-space:pre-wrap}
